Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get pods                                                                              
No resources found.                                                                             
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ                                                                                               
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ ls pod/pod-helloworld.yml                                                                     
pod/pod-helloworld.yml                                                                          
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl apply -f pod/pod-helloworld.yml                                                       
pod/my-nginx created                                                                            
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get pods                                                                              
NAME       READY   STATUS    RESTARTS   AGE                                                     
my-nginx   1/1     Running   0          80s                                                     
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get pod                                                                               
NAME       READY   STATUS    RESTARTS   AGE                                                     
my-nginx   1/1     Running   0          108s                                                    
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get po                                                                                
NAME       READY   STATUS    RESTARTS   AGE                                                     
my-nginx   1/1     Running   0          112s                                                    
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl describe pod my-nginx                                                                 
Name:         my-nginx                                                                          
Namespace:    default                                                                           
Node:         minikube/192.168.99.150                                                           
Start Time:   Wed, 26 Jun 2019 11:32:50 +0530                                                   
Labels:       app=helloworld                                                                    
Annotations:  kubectl.kubernetes.io/last-applied-configuration:                                 
                {"apiVersion":"v1","kind":"Pod","metadata":{"annotations":{},"labels":{"app":"he
lloworld"},"name":"my-nginx","namespace":"default"},"spec"...                                   
Status:       Running                                                                           
IP:           172.17.0.14                                                                       
Containers:                                                                                     
  nginx:                                                                                        
    Container ID:   docker://ee684b1d1e52e7dafaa70eeb97798b6b3d95d47ac5adafdfea5a1db124e5a83e   
    Image:          nginx:alpine                                                                
    Image ID:       docker-pullable://nginx@sha256:b126fee6820be927b1e04ae36b3f51aa47d9b73bf6b18
26ff19a59d22b2b4c63                                                                             
    Port:           80/TCP                                                                      
    Host Port:      0/TCP                                                                       
    State:          Running                                                                     
      Started:      Wed, 26 Jun 2019 11:32:52 +0530                                             
    Ready:          True                                                                        
    Restart Count:  0                                                                           
    Environment:    <none>                                                                      
    Mounts:                                                                                     
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-448nd (ro)               
Conditions:                                                                                     
  Type           Status                                                                         
  Initialized    True                                                                           
  Ready          True                                                                           
  PodScheduled   True                                                                           
Volumes:                                                                                        
  default-token-448nd:                                                                          
    Type:        Secret (a volume populated by a Secret)                                        
    SecretName:  default-token-448nd                                                            
    Optional:    false                                                                          
QoS Class:       BestEffort                                                                     
Node-Selectors:  <none>                                                                         
Tolerations:     <none>                                                                         
Events:                                                                                         
  Type    Reason                 Age    From               Message                              
  ----    ------                 ----   ----               -------                              
  Normal  Scheduled              2m49s  default-scheduler  Successfully assigned my-nginx to min
ikube                                                                                           
  Normal  SuccessfulMountVolume  2m48s  kubelet, minikube  MountVolume.SetUp succeeded for volum
e "default-token-448nd"                                                                         
  Normal  Pulled                 2m47s  kubelet, minikube  Container image "nginx:alpine" alread
y present on machine                                                                            
  Normal  Created                2m47s  kubelet, minikube  Created container                    
  Normal  Started                2m46s  kubelet, minikube  Started container                    
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get po                                                                                
NAME       READY   STATUS    RESTARTS   AGE                                                     
my-nginx   1/1     Running   0          41m                                                     
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl delete pod my-nginx                                                                   
pod "my-nginx" deleted                                                                          
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get po                                                                                
No resources found.                                                                             
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ                                                                                               
                                                                                                

------------------------------------------------------

λ kubectl apply -f rc/rc-helloworld.yml                                                         
replicationcontroller/helloworld-controller created                                             
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get replicationcontroller                                                             
NAME                    DESIRED   CURRENT   READY   AGE                                         
helloworld-controller   2         2         2       23s                                         
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get rc                                                                                
NAME                    DESIRED   CURRENT   READY   AGE                                         
helloworld-controller   2         2         2       32s                                         
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get pods                                                                              
NAME                          READY   STATUS    RESTARTS   AGE                                  
helloworld-controller-r2bcc   1/1     Running   0          56s                                  
helloworld-controller-z6222   1/1     Running   0          56s                                  
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ kubectl get pods -o wide                                                                      
NAME                          READY   STATUS    RESTARTS   AGE   IP            NODE       NOMINA
TED NODE   READINESS GATES                                                                      
helloworld-controller-r2bcc   1/1     Running   0          93s   172.17.0.15   minikube   <none>
           <none>                                                                               
helloworld-controller-z6222   1/1     Running   0          93s   172.17.0.14   minikube   <none>
           <none>                                                                               
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)                          
λ                                                                                               



------------------------------------------------------------------------------------------

λ kubectl get pods -o wide
NAME                          READY   STATUS    RESTARTS   AGE   IP            NODE       NOMINATED NODE   READINESS GATES
helloworld-controller-r2bcc   1/1     Running   0          93s   172.17.0.15   minikube   <none>
           <none>
helloworld-controller-z6222   1/1     Running   0          93s   172.17.0.14   minikube   <none>
           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl delete pod helloworld-controller-z6222
pod "helloworld-controller-z6222" deleted
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                          READY   STATUS    RESTARTS   AGE   IP            NODE       NOMINATED NODE   READINESS GATES
helloworld-controller-gldq6   1/1     Running   0          22s   172.17.0.16   minikube   <none>
           <none>
helloworld-controller-r2bcc   1/1     Running   0          69m   172.17.0.15   minikube   <none>
           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl scale rc helloworld-controller --replicas 5
replicationcontroller/helloworld-controller scaled
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                          READY   STATUS              RESTARTS   AGE     IP            NODE
      NOMINATED NODE   READINESS GATES
helloworld-controller-4dt8l   1/1     Running             0          5s      172.17.0.18   minikube   <none>           <none>
helloworld-controller-gldq6   1/1     Running             0          2m26s   172.17.0.16   minikube   <none>           <none>
helloworld-controller-l9r2k   0/1     ContainerCreating   0          5s      <none>        minikube   <none>           <none>
helloworld-controller-mlz8w   0/1     ContainerCreating   0          5s      <none>        minikube   <none>           <none>
helloworld-controller-r2bcc   1/1     Running             0          71m     172.17.0.15   minikube   <none>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                          READY   STATUS    RESTARTS   AGE
helloworld-controller-4dt8l   1/1     Running   0          18s
helloworld-controller-gldq6   1/1     Running   0          2m39s
helloworld-controller-l9r2k   1/1     Running   0          18s
helloworld-controller-mlz8w   1/1     Running   0          18s
helloworld-controller-r2bcc   1/1     Running   0          71m
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get rc
NAME                    DESIRED   CURRENT   READY   AGE
helloworld-controller   5         5         5       71m
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl scale rc helloworld-controller --replicas 2
replicationcontroller/helloworld-controller scaled
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                          READY   STATUS        RESTARTS   AGE
helloworld-controller-4dt8l   0/1     Terminating   0          81s
helloworld-controller-gldq6   1/1     Running       0          3m42s
helloworld-controller-l9r2k   0/1     Terminating   0          81s
helloworld-controller-mlz8w   0/1     Terminating   0          81s
helloworld-controller-r2bcc   1/1     Running       0          72m
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                          READY   STATUS    RESTARTS   AGE
helloworld-controller-gldq6   1/1     Running   0          3m55s
helloworld-controller-r2bcc   1/1     Running   0          72m
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl apply -f rc/rc-helloworld.yml
replicationcontroller/helloworld-controller configured
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get rc
NAME                    DESIRED   CURRENT   READY   AGE
helloworld-controller   5         5         5       74m
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                          READY   STATUS    RESTARTS   AGE
helloworld-controller-fv7gj   1/1     Running   0          15s
helloworld-controller-gldq6   1/1     Running   0          5m48s
helloworld-controller-mnsdk   1/1     Running   0          15s
helloworld-controller-p4whg   1/1     Running   0          15s
helloworld-controller-r2bcc   1/1     Running   0          74m
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME                          READY   STATUS    RESTARTS   AGE     LABELS
helloworld-controller-fv7gj   1/1     Running   0          2m18s   app=helloworld
helloworld-controller-gldq6   1/1     Running   0          7m51s   app=helloworld
helloworld-controller-mnsdk   1/1     Running   0          2m18s   app=helloworld
helloworld-controller-p4whg   1/1     Running   0          2m18s   app=helloworld
helloworld-controller-r2bcc   1/1     Running   0          76m     app=helloworld
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ #kubectl delete rc helloworld-controller
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl delete -f rc/rc-helloworld.yml
replicationcontroller "helloworld-controller" deleted
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
No resources found.
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl apply -f pod/pod-helloworld.yml
pod/my-nginx created
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME       READY   STATUS    RESTARTS   AGE   LABELS
my-nginx   1/1     Running   0          9s    app=helloworld
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl apply -f rc/rc-helloworld.yml
replicationcontroller/helloworld-controller created
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get rc
NAME                    DESIRED   CURRENT   READY   AGE
helloworld-controller   2         2         2       8s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME                          READY   STATUS    RESTARTS   AGE   LABELS
helloworld-controller-hkrcp   1/1     Running   0          16s   app=helloworld
my-nginx                      1/1     Running   0          89s   app=helloworld
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl delete pod my-nginx
pod "my-nginx" deleted
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME                          READY   STATUS    RESTARTS   AGE   LABELS
helloworld-controller-hkrcp   1/1     Running   0          56s   app=helloworld
helloworld-controller-hn4xp   1/1     Running   0          6s    app=helloworld
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ




----------------------------------------------------------------------------------------------------------


Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
No resources found.
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl apply -f dep/dep-helloworld.yml
deployment.extensions/helloworld-dep created
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get deploy
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
helloworld-dep   2/2     2            2           16s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY   STATUS    RESTARTS   AGE
helloworld-dep-765746cb75-m8s54   1/1     Running   0          29s
helloworld-dep-765746cb75-s45g8   1/1     Running   0          29s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get rs
NAME                        DESIRED   CURRENT   READY   AGE
helloworld-dep-765746cb75   2         2         2       51s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get replicaset
NAME                        DESIRED   CURRENT   READY   AGE
helloworld-dep-765746cb75   2         2         2       64s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME                              READY   STATUS    RESTARTS   AGE   LABELS
helloworld-dep-765746cb75-m8s54   1/1     Running   0          95s   app=helloworld,pod-template-hash=3213027631
helloworld-dep-765746cb75-s45g8   1/1     Running   0          95s   app=helloworld,pod-template-hash=3213027631
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get deploy
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
helloworld-dep   2/2     2            2           2m40s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get rs
NAME                        DESIRED   CURRENT   READY   AGE
helloworld-dep-765746cb75   2         2         2       2m49s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY   STATUS    RESTARTS   AGE
helloworld-dep-765746cb75-m8s54   1/1     Running   0          2m57s
helloworld-dep-765746cb75-s45g8   1/1     Running   0          2m57s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ #kubectl scale rc helloworld-controller --replicas 2
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl scale dep helloworld-dep --replicas 5
error: the server doesn't have a resource type "dep"
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl scale deploy helloworld-dep --replicas 5
deployment.extensions/helloworld-dep scaled
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY   STATUS              RESTARTS   AGE
helloworld-dep-765746cb75-2sg7d   0/1     ContainerCreating   0          6s
helloworld-dep-765746cb75-m8s54   1/1     Running             0          4m15s
helloworld-dep-765746cb75-r7xv4   0/1     ContainerCreating   0          5s
helloworld-dep-765746cb75-s45g8   1/1     Running             0          4m15s
helloworld-dep-765746cb75-wfvwc   0/1     ContainerCreating   0          5s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl apply -f dep/dep-helloworld.yml
deployment.extensions/helloworld-dep configured
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY   STATUS              RESTARTS   AGE
helloworld-dep-765746cb75-2sg7d   1/1     Running             0          33s
helloworld-dep-765746cb75-84x8v   0/1     ContainerCreating   0          6s
helloworld-dep-765746cb75-dbpvx   0/1     ContainerCreating   0          6s
helloworld-dep-765746cb75-kk5qx   0/1     ContainerCreating   0          6s
helloworld-dep-765746cb75-m8s54   1/1     Running             0          4m42s
helloworld-dep-765746cb75-pxxnp   0/1     ContainerCreating   0          7s
helloworld-dep-765746cb75-r7xv4   1/1     Running             0          32s
helloworld-dep-765746cb75-s45g8   1/1     Running             0          4m42s
helloworld-dep-765746cb75-vw55m   0/1     ContainerCreating   0          6s
helloworld-dep-765746cb75-wfvwc   1/1     Running             0          32s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployment.extensions/helloworld-dep
REVISION  CHANGE-CAUSE
1         <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep --revision 1
deployment.extensions/helloworld-dep with revision #1
Pod Template:
  Labels:       app=helloworld
        pod-template-hash=3213027631
  Containers:
   web:
    Image:      nginx
    Port:       80/TCP
    Host Port:  0/TCP
    Environment:        <none>
    Mounts:     <none>
  Volumes:      <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY   STATUS    RESTARTS   AGE
helloworld-dep-765746cb75-2sg7d   1/1     Running   0          3m19s
helloworld-dep-765746cb75-84x8v   1/1     Running   0          2m52s
helloworld-dep-765746cb75-dbpvx   1/1     Running   0          2m52s
helloworld-dep-765746cb75-kk5qx   1/1     Running   0          2m52s
helloworld-dep-765746cb75-m8s54   1/1     Running   0          7m28s
helloworld-dep-765746cb75-pxxnp   1/1     Running   0          2m53s
helloworld-dep-765746cb75-r7xv4   1/1     Running   0          3m18s
helloworld-dep-765746cb75-s45g8   1/1     Running   0          7m28s
helloworld-dep-765746cb75-vw55m   1/1     Running   0          2m52s
helloworld-dep-765746cb75-wfvwc   1/1     Running   0          3m18s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout status deploy helloworld-dep
deployment "helloworld-dep" successfully rolled out
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl set image deploy helloworld-dep web=nginx:alpine
deployment.extensions/helloworld-dep image updated
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout status deploy helloworld-dep
Waiting for deployment "helloworld-dep" rollout to finish: 2 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 2 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 2 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 3 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 3 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 3 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 3 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for deployment "helloworld-dep" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "helloworld-dep" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "helloworld-dep" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "helloworld-dep" rollout to finish: 9 of 10 updated replicas are available...
deployment "helloworld-dep" successfully rolled out
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployment.extensions/helloworld-dep
REVISION  CHANGE-CAUSE
1         <none>
2         <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep --revision 1
deployment.extensions/helloworld-dep with revision #1
Pod Template:
  Labels:       app=helloworld
        pod-template-hash=3213027631
  Containers:
   web:
    Image:      nginx
    Port:       80/TCP
    Host Port:  0/TCP
    Environment:        <none>
    Mounts:     <none>
  Volumes:      <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep --revision 2
deployment.extensions/helloworld-dep with revision #2
Pod Template:
  Labels:       app=helloworld
        pod-template-hash=3843324994
  Containers:
   web:
    Image:      nginx:alpine
    Port:       80/TCP
    Host Port:  0/TCP
    Environment:        <none>
    Mounts:     <none>
  Volumes:      <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployment.extensions/helloworld-dep
REVISION  CHANGE-CAUSE
1         <none>
2         <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout undo deploy helloworld-dep --to-revision 1
deployment.extensions/helloworld-dep rolled back
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployment.extensions/helloworld-dep
REVISION  CHANGE-CAUSE
2         <none>
3         <none>

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ


-------------------------------------------------------------------------------------------

Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get svc
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
hw-svc       NodePort    10.98.220.82   <none>        8888:31001/TCP   13d
kubernetes   ClusterIP   10.96.0.1      <none>        443/TCP          196d
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl describe svc hw-svc
Name:                     hw-svc
Namespace:                default
Labels:                   <none>
Annotations:              kubectl.kubernetes.io/last-applied-configuration:
                            {"apiVersion":"v1","kind":"Service","metadata":{"aname":"hw-svc","namespace":"default"},"spec":{"ports":[{"nodePort":31001...
Selector:                 app=helloworld
Type:                     NodePort
IP:                       10.98.220.82
Port:                     <unset>  8888/TCP
TargetPort:               nginxport/TCP
NodePort:                 <unset>  31001/TCP
Endpoints:                172.17.0.15:80
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                             READY   STATUS    RESTARTS   AGE   IP
MINATED NODE   READINESS GATES
helloworld-dep-67ddfbbb4-kxrpw   1/1     Running   0          11m   172.17.0.15one>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME                             READY   STATUS    RESTARTS   AGE   LABELS
helloworld-dep-67ddfbbb4-kxrpw   1/1     Running   0          12m   app=hellowo-hash=238896660
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl scale deploy helloworld-dep --replicas 2
deployment.extensions/helloworld-dep scaled
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                             READY   STATUS    RESTARTS   AGE   IP
MINATED NODE   READINESS GATES
helloworld-dep-67ddfbbb4-kxrpw   1/1     Running   0          19m   172.17.0.15one>           <none>
helloworld-dep-67ddfbbb4-l4gjp   1/1     Running   0          10s   172.17.0.14one>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl describe svc hw-svc
Name:                     hw-svc
Namespace:                default
Labels:                   <none>
Annotations:              kubectl.kubernetes.io/last-applied-configuration:
                            {"apiVersion":"v1","kind":"Service","metadata":{"aname":"hw-svc","namespace":"default"},"spec":{"ports":[{"nodePort":31001...
Selector:                 app=helloworld
Type:                     NodePort
IP:                       10.98.220.82
Port:                     <unset>  8888/TCP
TargetPort:               nginxport/TCP
NodePort:                 <unset>  31001/TCP
Endpoints:                172.17.0.14:80,172.17.0.15:80
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl set image deploy helloworld-dep web=nginx
deployment.extensions/helloworld-dep image updated
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                             READY   STATUS    RESTARTS   AGE   IP
MINATED NODE   READINESS GATES
helloworld-dep-6bbc9d5b5-2qwz8   1/1     Running   0          17s   172.17.0.14one>           <none>
helloworld-dep-6bbc9d5b5-k8dgd   1/1     Running   0          18s   172.17.0.16one>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl describe svc hw-svc
Name:                     hw-svc
Namespace:                default
Labels:                   <none>
Annotations:              kubectl.kubernetes.io/last-applied-configuration:
                            {"apiVersion":"v1","kind":"Service","metadata":{"aname":"hw-svc","namespace":"default"},"spec":{"ports":[{"nodePort":31001...
Selector:                 app=helloworld
Type:                     NodePort
IP:                       10.98.220.82
Port:                     <unset>  8888/TCP
TargetPort:               nginxport/TCP
NodePort:                 <unset>  31001/TCP
Endpoints:                172.17.0.14:80,172.17.0.16:80
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                             READY   STATUS    RESTARTS   AGE   IP
MINATED NODE   READINESS GATES
helloworld-dep-6bbc9d5b5-2qwz8   1/1     Running   0          67s   172.17.0.14one>           <none>
helloworld-dep-6bbc9d5b5-k8dgd   1/1     Running   0          68s   172.17.0.16one>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl set image deploy helloworld-dep web=app
deployment.extensions/helloworld-dep image updated
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ curl 192.168.99.150:31001
<html><body><h1>It works!</h1></body></html>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods
NAME                             READY   STATUS    RESTARTS   AGE
helloworld-dep-67ddfbbb4-6885w   1/1     Running   0          4m56s
helloworld-dep-67ddfbbb4-jqhgp   1/1     Running   0          4m56s
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                             READY   STATUS    RESTARTS   AGE    IP
OMINATED NODE   READINESS GATES
helloworld-dep-67ddfbbb4-6885w   1/1     Running   0          5m4s   172.17.0.1none>           <none>
helloworld-dep-67ddfbbb4-jqhgp   1/1     Running   0          5m4s   172.17.0.1none>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl get pods -o wide
NAME                             READY   STATUS    RESTARTS   AGE    IP
OMINATED NODE   READINESS GATES
helloworld-dep-67ddfbbb4-6885w   1/1     Running   0          5m8s   172.17.0.1none>           <none>
helloworld-dep-67ddfbbb4-jqhgp   1/1     Running   0          5m8s   172.17.0.1none>           <none>
Dell lap@Dell ~/docker-workshop/jun24/ora-jun24-dock-kube/k8s (master)
λ kubectl exec -it helloworld-dep-67ddfbbb4-6885w -- sh
/ # curl
sh: curl: not found
/ # ps
PID   USER     TIME  COMMAND
    1 root      0:00 httpd -D FOREGROUND
    9 apache    0:00 httpd -D FOREGROUND
   10 apache    0:00 httpd -D FOREGROUND
   11 apache    0:00 httpd -D FOREGROUND
   12 apache    0:00 httpd -D FOREGROUND
   13 apache    0:00 httpd -D FOREGROUND
   14 root      0:00 sh
   19 root      0:00 ps
/ # apk add curl
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.(1/4) Installing ca-certificates (20190108-r0)
  0%
 1%
2% #
% ##
 ###
###
###
##
##
#
#






                                                                              1
                                                                             13
                                                                            13%
                                                                           14%
                                                                          14% #
                                                                         15% ##
                                                                        15% ###
                                                                       16% ####
                                                                      16% #####
                                                                     17% ######
                                                                    18% #######
                                                                   19% ########
                                                                  19% #########
                                                                 20% ##########
                                                                20% ###########
                                                               21% ############
                                                              21% #############
                                                             22% ##############
                                                            22% ###############
                                                           23% ################
                                                          23% #################
                                                         24% ##################
                                                        24% ###################
                                                       25% ####################
                                                      25% #####################
                                                     26% ######################
                                                    27% #######################
                                                   28% ########################
                                                  29% #########################
                                                 30% ##########################
                                                30% ###########################
                                               31% ###########################
                                              31% ############################
                                             32% ############################
                                            32% #############################
                                           33% #############################
                                          33% ##############################
                                         34% ##############################
                                        34% ###############################
                                       35% ###############################
                                      36% ################################
                                     37% ################################
                                    37% #################################
                                   38% #################################
                                  38% ##################################
                                 39% ##################################
                                39% ###################################
                               40% ###################################
                              40% ####################################
                             41% ####################################
                            41% #####################################
                          (2/4) Installing nghttp2-libs (1.38.0-r0)
 46% #########################################
3/4) Installing libcurl (7.65.1-r0)
 56% ##################################################
4/4) Installing curl (7.65.1-r0)
 85% ##########################################################################00% ###########################################################################ecuting busybox-1.30.1-r2.trigger
Executing ca-certificates-20190108-r0.trigger
OK: 11 MiB in 24 packages
/ # curl localhost:80
<html><body><h1>It works!</h1></body></html>
/ # curl 10.98.220.82:8888
<html><body><h1>It works!</h1></body></html>
/ # curl 192.168.99.150:31001
<html><body><h1>It works!</h1></body></html>
/ # curl 172.17.0.14:80
<html><body><h1>It works!</h1></body></html>
/ # curl hw-svc:8888
^C
/ # curl hw-svc:8888
<html><body><h1>It works!</h1></body></html>
/ # cat /etc/resolv.conf
nameserver 10.96.0.10
search default.svc.cluster.local svc.cluster.local cluster.local
options ndots:5
/ # nslookup hw-svc
nslookup: can't resolve '(null)': Name does not resolve

Name:      hw-svc
Address 1: 10.98.220.82 hw-svc.default.svc.cluster.local
/ #
